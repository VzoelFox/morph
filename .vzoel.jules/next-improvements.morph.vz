# Rekomendasi Pengembangan Lanjutan

Dokumen ini berisi saran detail untuk pengembangan masa depan.

## Current Status (2025-12-26)

### âœ… COMPLETED
- **Phase 1-5**: Parser integration, Real AST, Scope management, Generic types, Interface types
- **GC System**: Verified working, threshold tuned for development
- **Native I/O**: Print, Println, Write functions implemented
- **MorphSH Components**: bootstrap_minimal, types, generic_types, advanced_type_checker, interface_simple

### ðŸŽ¯ N2 DEVELOPMENT PRIORITY

#### 1. Self-Hosting Compiler (HIGH)
- Complete lexer.fox (currently OOM due to environment limits)
- Implement parser.fox in Morph
- Build type checker in Morph
- Achieve N2 = Morph compiler written in Morph

#### 2. Memory Optimization (MEDIUM)
- Profile large file compilation
- Optimize AST memory usage
- Consider incremental compilation

#### 3. Production Release Prep (LOW - DEFERRED)
- Raise GC threshold back to 8MB/64MB
- Remove DEBUG prints
- Performance benchmarking

## Analysis Tool Enhancements

### 1. Closure Detection
Saat ini `isDefined` hanya mengecek keberadaan variabel di stack. Sebaiknya hitung `depth`. Jika `depth > 0` (bukan scope lokal saat ini), tandai sebagai `Captured Variable`.

### 2. Nested Function Handling
Gunakan key unik untuk nested function di `context.Symbols`.
Format saran: `parentFunction.childFunction`.

### 3. Type Inference
Implementasi `inferBinaryOpType` yang menangani koersi tipe:
- `String + String` -> `String`
- `Int + Float` -> `Float`
- `Bool` ops -> `Bool`

### 4. Control Flow & Dead Code
- **Unreachable Code**: Deteksi statement setelah `kembalikan` (return) atau `berhenti` (break).
- **Unused Var**: Track definisi variabel dan penggunaannya. Laporkan jika defined but not used.

### 5. Complexity Metrics
Hitung Cyclomatic Complexity per fungsi, bukan akumulasi global. Simpan di `Symbol.Complexity`.

### 6. Data Flow
Implementasi Liveness Analysis (Live-in/Live-out sets) untuk optimasi register allocation nantinya (saat masuk fase LLVM).
