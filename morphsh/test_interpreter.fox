ambil "io"

# Simple Interpreter - Combine Type System + Evaluator + Environment
# Minimal working interpreter untuk bootstrap

struktur Value
    kind int
    int_val int
akhir

struktur Env
    x int
    y int
    result int
akhir

fungsi value_int(n int) Value
    kembalikan Value(0, n)
akhir

fungsi eval_add(left Value, right Value) Value
    kembalikan value_int(left.int_val + right.int_val)
akhir

fungsi eval_mul(left Value, right Value) Value
    kembalikan value_int(left.int_val * right.int_val)
akhir

fungsi main() void
    io.Write(io.Stdout, "=== SIMPLE INTERPRETER TEST ===\n")
    
    # Simulate: var x = 10
    var env = Env(10, 0, 0)
    io.Write(io.Stdout, "var x = 10\n")
    
    # Simulate: var y = 5
    env.y = 5
    io.Write(io.Stdout, "var y = 5\n")
    
    # Simulate: var result = x + y
    var v_x = value_int(env.x)
    var v_y = value_int(env.y)
    var v_add = eval_add(v_x, v_y)
    env.result = v_add.int_val
    io.Write(io.Stdout, "var result = x + y\n")
    
    # Check result
    jika env.result == 15
        io.Write(io.Stdout, "result = 15: OK\n")
    akhir
    
    # Simulate: result = result * 2
    var v_result = value_int(env.result)
    var v_two = value_int(2)
    var v_mul = eval_mul(v_result, v_two)
    env.result = v_mul.int_val
    io.Write(io.Stdout, "result = result * 2\n")
    
    # Check result
    jika env.result == 30
        io.Write(io.Stdout, "result = 30: OK\n")
    akhir
    
    io.Write(io.Stdout, "=== INTERPRETER WORKING ===\n")
akhir

main()
